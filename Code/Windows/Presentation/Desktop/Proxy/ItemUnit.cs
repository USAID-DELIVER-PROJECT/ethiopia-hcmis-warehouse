
// Generated by MyGeneration Version # (1.3.0.3)

using System;
using System.Collections.Generic;

namespace Proxy
{
    public class ItemUnit
    {

        #region Properties

        private int? _ID;
        public int? ID
        {
            get
            {
                return _ID;
            }
            set
            {
                _ID = value;
            }
        }

        private int? _ItemID;
        public int? ItemID
        {
            get
            {
                return _ItemID;
            }
            set
            {
                _ItemID = value;
            }
        }

        private int? _QtyPerUnit;
        public int? QtyPerUnit
        {
            get
            {
                return _QtyPerUnit;
            }
            set
            {
                _QtyPerUnit = value;
            }
        }

        private string _Text;
        public string Text
        {
            get
            {
                return _Text;
            }
            set
            {
                _Text = value;
            }
        }


        #endregion

        #region Utilities

        public static List<ItemUnit> ToList(BLL.ItemUnit v)
        {
            List<ItemUnit> list = new List<ItemUnit>();
            while (!v.EOF)
            {
                ItemUnit t = new ItemUnit();
                if (!v.IsColumnNull("ID"))
                    t.ID = v.ID;
                if (!v.IsColumnNull("ItemID"))
                    t.ItemID = v.ItemID;
                if (!v.IsColumnNull("QtyPerUnit"))
                    t.QtyPerUnit = v.QtyPerUnit;
                if (!v.IsColumnNull("Text"))
                    t.Text = v.Text;

                list.Add(t);
                v.MoveNext();
            }
            return list;
        }

        #endregion


        #region Web service Saving

        public static void SaveList(List<HCMIS.Desktop.DirectoryServices.ItemUnitWithUnitDetail> list)
        {
            BLL.ItemUnit bv = new BLL.ItemUnit();
            foreach (HCMIS.Desktop.DirectoryServices.ItemUnitWithUnitDetail v in list)
            {
                // try to load by primary key
                bv.LoadByPrimaryKey(v.ID);

                // Since the new strategy is to have a QtyPerUnit as 1
                // this code will make sure that new entries are set to 1
                bool isNew = false;
                // if the entry doesn't exist, create it
                if (bv.RowCount == 0)
                {
                    bv.AddNew();
                    isNew = true;
                }
                // populate the contents of v on the to the database list
                bv.ID = v.ID;
                if (v.ItemID.HasValue)
                    bv.ItemID = v.ItemID.Value;
                
                if (isNew || (!isNew && bv.QtyPerUnit == 1))
                {
                    bv.QtyPerUnit = 1;
                }else
                {
                    bv.QtyPerUnit = v.QtyPerUnit;
                }

                if (v.Text != "" && v.Text != null)
                    bv.Text = v.Text;

                bv.Save();
            }


        }

        public static void DeleteList(List<int> list)
        {
            BLL.ItemUnit bv = new BLL.ItemUnit();
            foreach (int v in list)
            {
                // try to load by primary key
                bv.LoadByPrimaryKey(v);
                // if the entry doesn't exist, create it
                if (bv.RowCount > 0)
                {
                    bv.MarkAsDeleted();
                    bv.Save();
                }
                // populate the contents of v on the to the database list

            }


        }


        #endregion
    }
}
