
// Generated by MyGeneration Version # (1.2.0.7)

using System;
using DAL;

namespace BLL
{
	public class ReceiptInvoiceDetail : _ReceiptInvoiceDetail
	{
		public ReceiptInvoiceDetail()
		{
		
		}

	    public void LoadByReceiptInvoice(int receiptInvoiceID)
	    {
	        var query =
	            HCMIS.Repository.Queries.ReceiptInvoiceDetail.SelectReceiptInvoiceDetailsFromReceiptInvoice(
	                receiptInvoiceID);
            LoadFromRawSql(query);
	    }

        public void LoadMergedPOAndInvoiceDetails(int receiptInvoiceID)
	    {
            var query = HCMIS.Repository.Queries.ReceiptInvoiceDetail.SelectMergedDetailsFromInvoiceAndPO(receiptInvoiceID);
	        LoadFromRawSql(query);
	    }

	    public void DeleteReceiptInvoiceDetail(int receiptInvoiceDetailID)
	    {
            var receiptInvoiceDetail = new ReceiptInvoiceDetail();
            receiptInvoiceDetail.LoadByPrimaryKey(receiptInvoiceDetailID);
            receiptInvoiceDetail.MarkAsDeleted();

            var transaction = MyGeneration.dOOdads.TransactionMgr.ThreadTransactionMgr();
            transaction.BeginTransaction();
            try
            {
                receiptInvoiceDetail.Save();
                transaction.CommitTransaction();
            }
            catch (Exception exception)
            {
                transaction.RollbackTransaction();
            }
	    }
	}
}
